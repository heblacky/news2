(()=>{"use strict";var e={532:e=>{const{AbortController:t,AbortSignal:i}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=i,e.exports.default=t}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.d({},{A:()=>un});const n="Sophi Paywall SDK:",r={error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.error(n,...t)},log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.log(n,...t)},warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.warn(n,...t)}},{rE:a}={rE:"1.5.0"},s=a;function o(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&!("then"in e)}function d(e){return Object.entries(e)}var c,u,l=i(532),p=i.n(l);!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const i of e)t[i]=i;return t},e.getValidEnumValues=t=>{const i=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of i)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},e.find=(e,t)=>{for(const i of e)if(t(i))return i},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(c||(c={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(u||(u={}));const h=c.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),m=e=>{switch(typeof e){case"undefined":return h.undefined;case"string":return h.string;case"number":return isNaN(e)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"symbol":return h.symbol;case"object":return Array.isArray(e)?h.array:null===e?h.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?h.promise:"undefined"!=typeof Map&&e instanceof Map?h.map:"undefined"!=typeof Set&&e instanceof Set?h.set:"undefined"!=typeof Date&&e instanceof Date?h.date:h.object;default:return h.unknown}},f=c.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class v extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},i={_errors:[]},n=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(n);else if("invalid_return_type"===r.code)n(r.returnTypeError);else if("invalid_arguments"===r.code)n(r.argumentsError);else if(0===r.path.length)i._errors.push(t(r));else{let e=i,n=0;for(;n<r.path.length;){const i=r.path[n];n===r.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(t(r))):e[i]=e[i]||{_errors:[]},e=e[i],n++}}};return n(this),i}static assert(e){if(!(e instanceof v))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,c.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},i=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):i.push(e(n));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}v.create=e=>new v(e);const y=(e,t)=>{let i;switch(e.code){case f.invalid_type:i=e.received===h.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case f.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,c.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:i=`Unrecognized key(s) in object: ${c.joinValues(e.keys,", ")}`;break;case f.invalid_union:i="Invalid input";break;case f.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${c.joinValues(e.options)}`;break;case f.invalid_enum_value:i=`Invalid enum value. Expected ${c.joinValues(e.options)}, received '${e.received}'`;break;case f.invalid_arguments:i="Invalid function arguments";break;case f.invalid_return_type:i="Invalid function return type";break;case f.invalid_date:i="Invalid date";break;case f.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:c.assertNever(e.validation):i="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case f.too_small:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case f.too_big:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case f.custom:i="Invalid input";break;case f.invalid_intersection_types:i="Intersection results could not be merged";break;case f.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case f.not_finite:i="Number must be finite";break;default:i=t.defaultError,c.assertNever(e)}return{message:i}};let g=y;function w(){return g}const _=e=>{const{data:t,path:i,errorMaps:n,issueData:r}=e,a=[...i,...r.path||[]],s={...r,path:a};if(void 0!==r.message)return{...r,path:a,message:r.message};let o="";const d=n.filter((e=>!!e)).slice().reverse();for(const e of d)o=e(s,{data:t,defaultError:o}).message;return{...r,path:a,message:o}};function b(e,t){const i=w(),n=_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===y?void 0:y].filter((e=>!!e))});e.common.issues.push(n)}class x{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const n of t){if("aborted"===n.status)return k;"dirty"===n.status&&e.dirty(),i.push(n.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const e of t){const t=await e.key,n=await e.value;i.push({key:t,value:n})}return x.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const n of t){const{key:t,value:r}=n;if("aborted"===t.status)return k;if("aborted"===r.status)return k;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!n.alwaysSet||(i[t.value]=r.value)}return{status:e.value,value:i}}}const k=Object.freeze({status:"aborted"}),T=e=>({status:"dirty",value:e}),S=e=>({status:"valid",value:e}),Z=e=>"aborted"===e.status,O=e=>"dirty"===e.status,E=e=>"valid"===e.status,C=e=>"undefined"!=typeof Promise&&e instanceof Promise;function N(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)}function j(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i}var I,A,P;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(I||(I={}));class R{constructor(e,t,i,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const V=(e,t)=>{if(E(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new v(e.common.issues);return this._error=t,this._error}}};function $(e){if(!e)return{};const{errorMap:t,invalid_type_error:i,required_error:n,description:r}=e;if(t&&(i||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:r}:{errorMap:(t,r)=>{var a,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:r.defaultError}:void 0===r.data?{message:null!==(a=null!=o?o:n)&&void 0!==a?a:r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:null!==(s=null!=o?o:i)&&void 0!==s?s:r.defaultError}},description:r}}class M{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return m(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:m(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new x,ctx:{common:e.parent.common,data:e.data,parsedType:m(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(C(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const n={common:{issues:[],async:null!==(i=null==t?void 0:t.async)&&void 0!==i&&i,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:m(e)},r=this._parseSync({data:e,path:n.path,parent:n});return V(n,r)}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:m(e)},n=this._parse({data:e,path:i.path,parent:i}),r=await(C(n)?n:Promise.resolve(n));return V(i,r)}refine(e,t){const i=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const r=e(t),a=()=>n.addIssue({code:f.custom,...i(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(a(),!1))):!!r||(a(),!1)}))}refinement(e,t){return this._refinement(((i,n)=>!!e(i)||(n.addIssue("function"==typeof t?t(i,n):t),!1)))}_refinement(e){return new Ae({schema:this,typeName:Ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Pe.create(this,this._def)}nullable(){return Re.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return me.create(this,this._def)}promise(){return Ie.create(this,this._def)}or(e){return ye.create([this,e],this._def)}and(e){return be.create(this,e,this._def)}transform(e){return new Ae({...$(this._def),schema:this,typeName:Ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ve({...$(this._def),innerType:this,defaultValue:t,typeName:Ke.ZodDefault})}brand(){return new Ue({typeName:Ke.ZodBranded,type:this,...$(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new $e({...$(this._def),innerType:this,catchValue:t,typeName:Ke.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ze.create(this,e)}readonly(){return qe.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const D=/^c[^\s-]{8,}$/i,U=/^[0-9a-z]+$/,z=/^[0-9A-HJKMNP-TV-Z]{26}$/,q=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,L=/^[a-z0-9_-]{21}$/i,B=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let W;const F=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,H=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,G=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,J="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Y=new RegExp(`^${J}$`);function X(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Q(e){let t=`${J}T${X(e)}`;const i=[];return i.push(e.local?"Z?":"Z"),e.offset&&i.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${i.join("|")})`,new RegExp(`^${t}$`)}function ee(e,t){return!("v4"!==t&&t||!F.test(e))||!("v6"!==t&&t||!H.test(e))}class te extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==h.string){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.string,received:t.parsedType}),k}const t=new x;let i;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const r=e.data.length>n.value,a=e.data.length<n.value;(r||a)&&(i=this._getOrReturnCtx(e,i),r?b(i,{code:f.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&b(i,{code:f.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)K.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"email",code:f.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)W||(W=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),W.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"emoji",code:f.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)q.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"uuid",code:f.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)L.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"nanoid",code:f.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)D.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"cuid",code:f.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)U.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"cuid2",code:f.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)z.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"ulid",code:f.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(r){i=this._getOrReturnCtx(e,i),b(i,{validation:"url",code:f.invalid_string,message:n.message}),t.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"regex",code:f.invalid_string,message:n.message}),t.dirty())):"trim"===n.kind?e.data=e.data.trim():"includes"===n.kind?e.data.includes(n.value,n.position)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty()):"toLowerCase"===n.kind?e.data=e.data.toLowerCase():"toUpperCase"===n.kind?e.data=e.data.toUpperCase():"startsWith"===n.kind?e.data.startsWith(n.value)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty()):"datetime"===n.kind?Q(n).test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:"datetime",message:n.message}),t.dirty()):"date"===n.kind?Y.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:"date",message:n.message}),t.dirty()):"time"===n.kind?new RegExp(`^${X(n)}$`).test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{code:f.invalid_string,validation:"time",message:n.message}),t.dirty()):"duration"===n.kind?B.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"duration",code:f.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?ee(e.data,n.version)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"ip",code:f.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?G.test(e.data)||(i=this._getOrReturnCtx(e,i),b(i,{validation:"base64",code:f.invalid_string,message:n.message}),t.dirty()):c.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,i){return this.refinement((t=>e.test(t)),{validation:t,code:f.invalid_string,...I.errToObj(i)})}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...I.errToObj(e)})}url(e){return this._addCheck({kind:"url",...I.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...I.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...I.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...I.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...I.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...I.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...I.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...I.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...I.errToObj(e)})}datetime(e){var t,i;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(i=null==e?void 0:e.local)&&void 0!==i&&i,...I.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...I.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...I.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...I.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...I.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...I.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...I.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...I.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...I.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...I.errToObj(t)})}nonempty(e){return this.min(1,I.errToObj(e))}trim(){return new te({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new te({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new te({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ie(e,t){const i=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,r=i>n?i:n;return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}te.create=e=>{var t;return new te({checks:[],typeName:Ke.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$(e)})};class ne extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==h.number){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.number,received:t.parsedType}),k}let t;const i=new x;for(const n of this._def.checks)"int"===n.kind?c.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:f.invalid_type,expected:"integer",received:"float",message:n.message}),i.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):"multipleOf"===n.kind?0!==ie(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:f.not_finite,message:n.message}),i.dirty()):c.assertNever(n);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,I.toString(t))}gt(e,t){return this.setLimit("min",e,!1,I.toString(t))}lte(e,t){return this.setLimit("max",e,!0,I.toString(t))}lt(e,t){return this.setLimit("max",e,!1,I.toString(t))}setLimit(e,t,i,n){return new ne({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:I.toString(n)}]})}_addCheck(e){return new ne({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:I.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:I.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:I.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:I.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:I.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&c.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===t||i.value>t)&&(t=i.value):"max"===i.kind&&(null===e||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ne.create=e=>new ne({checks:[],typeName:Ke.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...$(e)});class re extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==h.bigint){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.bigint,received:t.parsedType}),k}let t;const i=new x;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),b(t,{code:f.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):c.assertNever(n);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,I.toString(t))}gt(e,t){return this.setLimit("min",e,!1,I.toString(t))}lte(e,t){return this.setLimit("max",e,!0,I.toString(t))}lt(e,t){return this.setLimit("max",e,!1,I.toString(t))}setLimit(e,t,i,n){return new re({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:I.toString(n)}]})}_addCheck(e){return new re({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:I.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}re.create=e=>{var t;return new re({checks:[],typeName:Ke.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$(e)})};class ae extends M{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==h.boolean){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.boolean,received:t.parsedType}),k}return S(e.data)}}ae.create=e=>new ae({typeName:Ke.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...$(e)});class se extends M{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==h.date){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.date,received:t.parsedType}),k}if(isNaN(e.data.getTime()))return b(this._getOrReturnCtx(e),{code:f.invalid_date}),k;const t=new x;let i;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(i=this._getOrReturnCtx(e,i),b(i,{code:f.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):c.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new se({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:I.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:I.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}se.create=e=>new se({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ke.ZodDate,...$(e)});class oe extends M{_parse(e){if(this._getType(e)!==h.symbol){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.symbol,received:t.parsedType}),k}return S(e.data)}}oe.create=e=>new oe({typeName:Ke.ZodSymbol,...$(e)});class de extends M{_parse(e){if(this._getType(e)!==h.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.undefined,received:t.parsedType}),k}return S(e.data)}}de.create=e=>new de({typeName:Ke.ZodUndefined,...$(e)});class ce extends M{_parse(e){if(this._getType(e)!==h.null){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.null,received:t.parsedType}),k}return S(e.data)}}ce.create=e=>new ce({typeName:Ke.ZodNull,...$(e)});class ue extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return S(e.data)}}ue.create=e=>new ue({typeName:Ke.ZodAny,...$(e)});class le extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return S(e.data)}}le.create=e=>new le({typeName:Ke.ZodUnknown,...$(e)});class pe extends M{_parse(e){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.never,received:t.parsedType}),k}}pe.create=e=>new pe({typeName:Ke.ZodNever,...$(e)});class he extends M{_parse(e){if(this._getType(e)!==h.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.void,received:t.parsedType}),k}return S(e.data)}}he.create=e=>new he({typeName:Ke.ZodVoid,...$(e)});class me extends M{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),n=this._def;if(t.parsedType!==h.array)return b(t,{code:f.invalid_type,expected:h.array,received:t.parsedType}),k;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,r=t.data.length<n.exactLength.value;(e||r)&&(b(t,{code:e?f.too_big:f.too_small,minimum:r?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),i.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(b(t,{code:f.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),i.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(b(t,{code:f.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map(((e,i)=>n.type._parseAsync(new R(t,e,t.path,i))))).then((e=>x.mergeArray(i,e)));const r=[...t.data].map(((e,i)=>n.type._parseSync(new R(t,e,t.path,i))));return x.mergeArray(i,r)}get element(){return this._def.type}min(e,t){return new me({...this._def,minLength:{value:e,message:I.toString(t)}})}max(e,t){return new me({...this._def,maxLength:{value:e,message:I.toString(t)}})}length(e,t){return new me({...this._def,exactLength:{value:e,message:I.toString(t)}})}nonempty(e){return this.min(1,e)}}function fe(e){if(e instanceof ve){const t={};for(const i in e.shape){const n=e.shape[i];t[i]=Pe.create(fe(n))}return new ve({...e._def,shape:()=>t})}return e instanceof me?new me({...e._def,type:fe(e.element)}):e instanceof Pe?Pe.create(fe(e.unwrap())):e instanceof Re?Re.create(fe(e.unwrap())):e instanceof xe?xe.create(e.items.map((e=>fe(e)))):e}me.create=(e,t)=>new me({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ke.ZodArray,...$(t)});class ve extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=c.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==h.object){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.object,received:t.parsedType}),k}const{status:t,ctx:i}=this._processInputParams(e),{shape:n,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof pe&&"strip"===this._def.unknownKeys))for(const e in i.data)r.includes(e)||a.push(e);const s=[];for(const e of r){const t=n[e],r=i.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new R(i,r,i.path,e)),alwaysSet:e in i.data})}if(this._def.catchall instanceof pe){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of a)s.push({key:{status:"valid",value:e},value:{status:"valid",value:i.data[e]}});else if("strict"===e)a.length>0&&(b(i,{code:f.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const n=i.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new R(i,n,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const i=await t.key,n=await t.value;e.push({key:i,value:n,alwaysSet:t.alwaysSet})}return e})).then((e=>x.mergeObjectSync(t,e))):x.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return I.errToObj,new ve({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,i)=>{var n,r,a,s;const o=null!==(a=null===(r=(n=this._def).errorMap)||void 0===r?void 0:r.call(n,t,i).message)&&void 0!==a?a:i.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=I.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new ve({...this._def,unknownKeys:"strip"})}passthrough(){return new ve({...this._def,unknownKeys:"passthrough"})}extend(e){return new ve({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ve({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ke.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ve({...this._def,catchall:e})}pick(e){const t={};return c.objectKeys(e).forEach((i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])})),new ve({...this._def,shape:()=>t})}omit(e){const t={};return c.objectKeys(this.shape).forEach((i=>{e[i]||(t[i]=this.shape[i])})),new ve({...this._def,shape:()=>t})}deepPartial(){return fe(this)}partial(e){const t={};return c.objectKeys(this.shape).forEach((i=>{const n=this.shape[i];e&&!e[i]?t[i]=n:t[i]=n.optional()})),new ve({...this._def,shape:()=>t})}required(e){const t={};return c.objectKeys(this.shape).forEach((i=>{if(e&&!e[i])t[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof Pe;)e=e._def.innerType;t[i]=e}})),new ve({...this._def,shape:()=>t})}keyof(){return Ce(c.objectKeys(this.shape))}}ve.create=(e,t)=>new ve({shape:()=>e,unknownKeys:"strip",catchall:pe.create(),typeName:Ke.ZodObject,...$(t)}),ve.strictCreate=(e,t)=>new ve({shape:()=>e,unknownKeys:"strict",catchall:pe.create(),typeName:Ke.ZodObject,...$(t)}),ve.lazycreate=(e,t)=>new ve({shape:e,unknownKeys:"strip",catchall:pe.create(),typeName:Ke.ZodObject,...$(t)});class ye extends M{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;if(t.common.async)return Promise.all(i.map((async e=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const i of e)if("dirty"===i.result.status)return t.common.issues.push(...i.ctx.common.issues),i.result;const i=e.map((e=>new v(e.ctx.common.issues)));return b(t,{code:f.invalid_union,unionErrors:i}),k}));{let e;const n=[];for(const r of i){const i={...t,common:{...t.common,issues:[]},parent:null},a=r._parseSync({data:t.data,path:t.path,parent:i});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:i}),i.common.issues.length&&n.push(i.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=n.map((e=>new v(e)));return b(t,{code:f.invalid_union,unionErrors:r}),k}}get options(){return this._def.options}}ye.create=(e,t)=>new ye({options:e,typeName:Ke.ZodUnion,...$(t)});const ge=e=>e instanceof Oe?ge(e.schema):e instanceof Ae?ge(e.innerType()):e instanceof Ee?[e.value]:e instanceof Ne?e.options:e instanceof je?c.objectValues(e.enum):e instanceof Ve?ge(e._def.innerType):e instanceof de?[void 0]:e instanceof ce?[null]:e instanceof Pe?[void 0,...ge(e.unwrap())]:e instanceof Re?[null,...ge(e.unwrap())]:e instanceof Ue||e instanceof qe?ge(e.unwrap()):e instanceof $e?ge(e._def.innerType):[];class we extends M{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.object)return b(t,{code:f.invalid_type,expected:h.object,received:t.parsedType}),k;const i=this.discriminator,n=t.data[i],r=this.optionsMap.get(n);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:f.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const n=new Map;for(const i of t){const t=ge(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(n.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);n.set(r,i)}}return new we({typeName:Ke.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...$(i)})}}function _e(e,t){const i=m(e),n=m(t);if(e===t)return{valid:!0,data:e};if(i===h.object&&n===h.object){const i=c.objectKeys(t),n=c.objectKeys(e).filter((e=>-1!==i.indexOf(e))),r={...e,...t};for(const i of n){const n=_e(e[i],t[i]);if(!n.valid)return{valid:!1};r[i]=n.data}return{valid:!0,data:r}}if(i===h.array&&n===h.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let n=0;n<e.length;n++){const r=_e(e[n],t[n]);if(!r.valid)return{valid:!1};i.push(r.data)}return{valid:!0,data:i}}return i===h.date&&n===h.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class be extends M{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),n=(e,n)=>{if(Z(e)||Z(n))return k;const r=_e(e.value,n.value);return r.valid?((O(e)||O(n))&&t.dirty(),{status:t.value,value:r.data}):(b(i,{code:f.invalid_intersection_types}),k)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}be.create=(e,t,i)=>new be({left:e,right:t,typeName:Ke.ZodIntersection,...$(i)});class xe extends M{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.array)return b(i,{code:f.invalid_type,expected:h.array,received:i.parsedType}),k;if(i.data.length<this._def.items.length)return b(i,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&i.data.length>this._def.items.length&&(b(i,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...i.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new R(i,e,i.path,t)):null})).filter((e=>!!e));return i.common.async?Promise.all(n).then((e=>x.mergeArray(t,e))):x.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new xe({...this._def,rest:e})}}xe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xe({items:e,typeName:Ke.ZodTuple,rest:null,...$(t)})};class ke extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.object)return b(i,{code:f.invalid_type,expected:h.object,received:i.parsedType}),k;const n=[],r=this._def.keyType,a=this._def.valueType;for(const e in i.data)n.push({key:r._parse(new R(i,e,i.path,e)),value:a._parse(new R(i,i.data[e],i.path,e)),alwaysSet:e in i.data});return i.common.async?x.mergeObjectAsync(t,n):x.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,i){return new ke(t instanceof M?{keyType:e,valueType:t,typeName:Ke.ZodRecord,...$(i)}:{keyType:te.create(),valueType:e,typeName:Ke.ZodRecord,...$(t)})}}class Te extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.map)return b(i,{code:f.invalid_type,expected:h.map,received:i.parsedType}),k;const n=this._def.keyType,r=this._def.valueType,a=[...i.data.entries()].map((([e,t],a)=>({key:n._parse(new R(i,e,i.path,[a,"key"])),value:r._parse(new R(i,t,i.path,[a,"value"]))})));if(i.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const i of a){const n=await i.key,r=await i.value;if("aborted"===n.status||"aborted"===r.status)return k;"dirty"!==n.status&&"dirty"!==r.status||t.dirty(),e.set(n.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const i of a){const n=i.key,r=i.value;if("aborted"===n.status||"aborted"===r.status)return k;"dirty"!==n.status&&"dirty"!==r.status||t.dirty(),e.set(n.value,r.value)}return{status:t.value,value:e}}}}Te.create=(e,t,i)=>new Te({valueType:t,keyType:e,typeName:Ke.ZodMap,...$(i)});class Se extends M{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==h.set)return b(i,{code:f.invalid_type,expected:h.set,received:i.parsedType}),k;const n=this._def;null!==n.minSize&&i.data.size<n.minSize.value&&(b(i,{code:f.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&i.data.size>n.maxSize.value&&(b(i,{code:f.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const r=this._def.valueType;function a(e){const i=new Set;for(const n of e){if("aborted"===n.status)return k;"dirty"===n.status&&t.dirty(),i.add(n.value)}return{status:t.value,value:i}}const s=[...i.data.values()].map(((e,t)=>r._parse(new R(i,e,i.path,t))));return i.common.async?Promise.all(s).then((e=>a(e))):a(s)}min(e,t){return new Se({...this._def,minSize:{value:e,message:I.toString(t)}})}max(e,t){return new Se({...this._def,maxSize:{value:e,message:I.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Se.create=(e,t)=>new Se({valueType:e,minSize:null,maxSize:null,typeName:Ke.ZodSet,...$(t)});class Ze extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.function)return b(t,{code:f.invalid_type,expected:h.function,received:t.parsedType}),k;function i(e,i){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,w(),y].filter((e=>!!e)),issueData:{code:f.invalid_arguments,argumentsError:i}})}function n(e,i){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,w(),y].filter((e=>!!e)),issueData:{code:f.invalid_return_type,returnTypeError:i}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Ie){const e=this;return S((async function(...t){const s=new v([]),o=await e._def.args.parseAsync(t,r).catch((e=>{throw s.addIssue(i(t,e)),s})),d=await Reflect.apply(a,this,o),c=await e._def.returns._def.type.parseAsync(d,r).catch((e=>{throw s.addIssue(n(d,e)),s}));return c}))}{const e=this;return S((function(...t){const s=e._def.args.safeParse(t,r);if(!s.success)throw new v([i(t,s.error)]);const o=Reflect.apply(a,this,s.data),d=e._def.returns.safeParse(o,r);if(!d.success)throw new v([n(o,d.error)]);return d.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ze({...this._def,args:xe.create(e).rest(le.create())})}returns(e){return new Ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new Ze({args:e||xe.create([]).rest(le.create()),returns:t||le.create(),typeName:Ke.ZodFunction,...$(i)})}}class Oe extends M{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Oe.create=(e,t)=>new Oe({getter:e,typeName:Ke.ZodLazy,...$(t)});class Ee extends M{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:f.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Ce(e,t){return new Ne({values:e,typeName:Ke.ZodEnum,...$(t)})}Ee.create=(e,t)=>new Ee({value:e,typeName:Ke.ZodLiteral,...$(t)});class Ne extends M{constructor(){super(...arguments),A.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),i=this._def.values;return b(t,{expected:c.joinValues(i),received:t.parsedType,code:f.invalid_type}),k}if(N(this,A,"f")||j(this,A,new Set(this._def.values),"f"),!N(this,A,"f").has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return b(t,{received:t.data,code:f.invalid_enum_value,options:i}),k}return S(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ne.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ne.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}A=new WeakMap,Ne.create=Ce;class je extends M{constructor(){super(...arguments),P.set(this,void 0)}_parse(e){const t=c.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==h.string&&i.parsedType!==h.number){const e=c.objectValues(t);return b(i,{expected:c.joinValues(e),received:i.parsedType,code:f.invalid_type}),k}if(N(this,P,"f")||j(this,P,new Set(c.getValidEnumValues(this._def.values)),"f"),!N(this,P,"f").has(e.data)){const e=c.objectValues(t);return b(i,{received:i.data,code:f.invalid_enum_value,options:e}),k}return S(e.data)}get enum(){return this._def.values}}P=new WeakMap,je.create=(e,t)=>new je({values:e,typeName:Ke.ZodNativeEnum,...$(t)});class Ie extends M{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==h.promise&&!1===t.common.async)return b(t,{code:f.invalid_type,expected:h.promise,received:t.parsedType}),k;const i=t.parsedType===h.promise?t.data:Promise.resolve(t.data);return S(i.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ie.create=(e,t)=>new Ie({type:e,typeName:Ke.ZodPromise,...$(t)});class Ae extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),n=this._def.effect||null,r={addIssue:e=>{b(i,e),e.fatal?t.abort():t.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===n.type){const e=n.transform(i.data,r);if(i.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return k;const n=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return"aborted"===n.status?k:"dirty"===n.status||"dirty"===t.value?T(n.value):n}));{if("aborted"===t.value)return k;const n=this._def.schema._parseSync({data:e,path:i.path,parent:i});return"aborted"===n.status?k:"dirty"===n.status||"dirty"===t.value?T(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,r);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.common.async){const n=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===n.status?k:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((i=>"aborted"===i.status?k:("dirty"===i.status&&t.dirty(),e(i.value).then((()=>({status:t.value,value:i.value}))))))}if("transform"===n.type){if(!1===i.common.async){const e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!E(e))return e;const a=n.transform(e.value,r);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((e=>E(e)?Promise.resolve(n.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}c.assertNever(n)}}Ae.create=(e,t,i)=>new Ae({schema:e,typeName:Ke.ZodEffects,effect:t,...$(i)}),Ae.createWithPreprocess=(e,t,i)=>new Ae({schema:t,effect:{type:"preprocess",transform:e},typeName:Ke.ZodEffects,...$(i)});class Pe extends M{_parse(e){return this._getType(e)===h.undefined?S(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pe.create=(e,t)=>new Pe({innerType:e,typeName:Ke.ZodOptional,...$(t)});class Re extends M{_parse(e){return this._getType(e)===h.null?S(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Re.create=(e,t)=>new Re({innerType:e,typeName:Ke.ZodNullable,...$(t)});class Ve extends M{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===h.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ve.create=(e,t)=>new Ve({innerType:e,typeName:Ke.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...$(t)});class $e extends M{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return C(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new v(i.common.issues)},input:i.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new v(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}$e.create=(e,t)=>new $e({innerType:e,typeName:Ke.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...$(t)});class Me extends M{_parse(e){if(this._getType(e)!==h.nan){const t=this._getOrReturnCtx(e);return b(t,{code:f.invalid_type,expected:h.nan,received:t.parsedType}),k}return{status:"valid",value:e.data}}}Me.create=e=>new Me({typeName:Ke.ZodNaN,...$(e)});const De=Symbol("zod_brand");class Ue extends M{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class ze extends M{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),T(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})();{const e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,t){return new ze({in:e,out:t,typeName:Ke.ZodPipeline})}}class qe extends M{_parse(e){const t=this._def.innerType._parse(e),i=e=>(E(e)&&(e.value=Object.freeze(e.value)),e);return C(t)?t.then((e=>i(e))):i(t)}unwrap(){return this._def.innerType}}function Le(e,t={},i){return e?ue.create().superRefine(((n,r)=>{var a,s;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:i)||void 0===s||s,d="string"==typeof e?{message:e}:e;r.addIssue({code:"custom",...d,fatal:o})}})):ue.create()}qe.create=(e,t)=>new qe({innerType:e,typeName:Ke.ZodReadonly,...$(t)});const Be={object:ve.lazycreate};var Ke;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ke||(Ke={}));const We=te.create,Fe=ne.create,He=Me.create,Ge=re.create,Je=ae.create,Ye=se.create,Xe=oe.create,Qe=de.create,et=ce.create,tt=ue.create,it=le.create,nt=pe.create,rt=he.create,at=me.create,st=ve.create,ot=ve.strictCreate,dt=ye.create,ct=we.create,ut=be.create,lt=xe.create,pt=ke.create,ht=Te.create,mt=Se.create,ft=Ze.create,vt=Oe.create,yt=Ee.create,gt=Ne.create,wt=je.create,_t=Ie.create,bt=Ae.create,xt=Pe.create,kt=Re.create,Tt=Ae.createWithPreprocess,St=ze.create,Zt={string:e=>te.create({...e,coerce:!0}),number:e=>ne.create({...e,coerce:!0}),boolean:e=>ae.create({...e,coerce:!0}),bigint:e=>re.create({...e,coerce:!0}),date:e=>se.create({...e,coerce:!0})},Ot=k;var Et=Object.freeze({__proto__:null,defaultErrorMap:y,setErrorMap:function(e){g=e},getErrorMap:w,makeIssue:_,EMPTY_PATH:[],addIssueToContext:b,ParseStatus:x,INVALID:k,DIRTY:T,OK:S,isAborted:Z,isDirty:O,isValid:E,isAsync:C,get util(){return c},get objectUtil(){return u},ZodParsedType:h,getParsedType:m,ZodType:M,datetimeRegex:Q,ZodString:te,ZodNumber:ne,ZodBigInt:re,ZodBoolean:ae,ZodDate:se,ZodSymbol:oe,ZodUndefined:de,ZodNull:ce,ZodAny:ue,ZodUnknown:le,ZodNever:pe,ZodVoid:he,ZodArray:me,ZodObject:ve,ZodUnion:ye,ZodDiscriminatedUnion:we,ZodIntersection:be,ZodTuple:xe,ZodRecord:ke,ZodMap:Te,ZodSet:Se,ZodFunction:Ze,ZodLazy:Oe,ZodLiteral:Ee,ZodEnum:Ne,ZodNativeEnum:je,ZodPromise:Ie,ZodEffects:Ae,ZodTransformer:Ae,ZodOptional:Pe,ZodNullable:Re,ZodDefault:Ve,ZodCatch:$e,ZodNaN:Me,BRAND:De,ZodBranded:Ue,ZodPipeline:ze,ZodReadonly:qe,custom:Le,Schema:M,ZodSchema:M,late:Be,get ZodFirstPartyTypeKind(){return Ke},coerce:Zt,any:tt,array:at,bigint:Ge,boolean:Je,date:Ye,discriminatedUnion:ct,effect:bt,enum:gt,function:ft,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Le((t=>t instanceof e),t),intersection:ut,lazy:vt,literal:yt,map:ht,nan:He,nativeEnum:wt,never:nt,null:et,nullable:kt,number:Fe,object:st,oboolean:()=>Je().optional(),onumber:()=>Fe().optional(),optional:xt,ostring:()=>We().optional(),pipeline:St,preprocess:Tt,promise:_t,record:pt,set:mt,strictObject:ot,string:We,symbol:Xe,transformer:bt,tuple:lt,undefined:Qe,union:dt,unknown:it,void:rt,NEVER:Ot,ZodIssueCode:f,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:v});class Ct{constructor(e,t){if(t.length>e)throw new Error("Initial values exceed queue size");this.queue=t.slice(),this.size=e}enqueue(e){this.queue.length===this.size&&this.dequeue(),this.queue.push(e)}dequeue(){if(0===this.queue.length)throw new Error("Queue is empty");return this.queue.shift()}}function Nt(e){try{const t=localStorage.getItem(e);if(null===t)return t;try{return JSON.parse(t)}catch{return t}}catch{return null}}const jt=Et.enum(["registered","anonymous"]),It="sophi.paywall",At=Array(28).fill(0),Pt=Et.object({lastSeen:Et.number().nonnegative().int(),pageViewHistory:Et.array(Et.number().int().gte(0).lte(9)).length(28),visitHistory:Et.array(Et.number().int().gte(0).lte(1)).length(28),visitorType:jt});let Rt=Nt(It);const Vt={visitHistory:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],pageViewHistory:At,lastSeen:Yt(),visitorType:"anonymous"};null===Rt&&null!==Nt("sophi_last_seen")&&null!==Nt("sophi_visit_journey")&&(Rt={...Vt,visitorType:Nt("sophi_visitor")||Vt.visitorType,lastSeen:Nt("sophi_last_seen"),visitHistory:Nt("sophi_visit_journey")});const $t={pageViewIncremented:!1,isReturning:null!==Rt};let Mt={...Vt,...$t};if(null!==Rt){const e=Pt.safeParse(Rt);if(e.success){const t=function(e){return e.pageViewHistory=((e,t)=>{const i=Jt(t,Yt());return i>0?[...e,...Array(i).fill(0)].slice(-28):e})(e.pageViewHistory,e.lastSeen),e.visitHistory=function(e,t){const i=e,n=Jt(t,Yt()),r=new Ct(28,i);for(let e=0;e<n;e++)e==n-1?r.enqueue(1):r.enqueue(0);return r.queue}(e.visitHistory,e.lastSeen),e.lastSeen=Yt(),e}(e.data);Mt={...Mt,...t}}}const Dt="INCREMENT_PAGE_VIEW",Ut="UPDATE_STORAGE",zt="UPDATE_VISITOR_TYPE",qt=Dt,Lt=zt,Bt=function(e){switch(e.type){case Dt:Mt.pageViewHistory=function(e){if(e.reduce(((e,t)=>e+t),0)<9){const t=[...e];return t[t.length-1]++,t}return e}(Mt.pageViewHistory),Mt.pageViewIncremented=!0,Bt({type:Ut});break;case zt:Mt.visitorType=e.visitorType,Bt({type:Ut});break;case"UPDATE_VISIT_HISTORY":Mt.visitHistory=e.visitHistory,Bt({type:Ut});break;case"UPDATE_LAST_SEEN":Mt.lastSeen=e.lastSeen,Bt({type:Ut});break;case Ut:!function(e,t){try{return localStorage.setItem(e,JSON.stringify(t))}catch(e){}}(It,Mt)}};Bt({type:Ut});const Kt=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}},Wt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.referrer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.host,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[/google\./,/yahoo\./,/duckduckgo\./,/bing\./],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[/facebook\./,/instagram\./,/t\.co/,/linkedin\./];try{if("string"!=typeof e)throw new Error("locationHref should be a string");if("string"!=typeof t)throw new Error("documentReferrer should be a string");if("string"!=typeof i)throw new Error("locationHost should be a string");const a=["utm_campaign"];for(const t of a)if(-1!==e.trim().toLowerCase().search(t))return"campaign";if(""===t)return"direct";if(-1!==t.search(i))return"internal";for(const e of n)if(-1!==t.search(e))return"search";for(const e of r)if(-1!==t.search(e))return"social";return"other"}catch(e){return""}},Ft=Et.object({count:Et.coerce.number().gte(0).multipleOf(1),daysSinceLastVisit:Et.coerce.number().gte(0).multipleOf(1),referrer:Et.enum(["campaign","direct","internal","search","social","other",""]),timeZone:Et.coerce.string().min(1)});function Ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{const t=Mt.visitHistory.reduce(((e,t)=>e+t));return t>=e?e:t}catch(e){return 1}}function Gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;try{const t=function(e){let t=0;for(let i=e.length-1;i>=0&&0===e[i];i--)t++;return t}(Mt.visitHistory.slice(0,-1))+1;return 28==t?0:t>=e?e:t}catch(e){return 0}}function Jt(e,t){if(e==t)return 0;{const i=Math.abs(t-e);return Math.floor(i/864e5)}}function Yt(){const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()}const Xt=async function(e,t){return dn.validate(),{daysSinceLastVisit:Gt(),count:Ht(),timeZone:Kt(),referrer:Wt(e,t)}};var Qt={724:function(e,t,i){var n;!function(r,a){var s="function",o="undefined",d="object",c="string",u="model",l="name",p="type",h="vendor",m="version",f="architecture",v="console",y="mobile",g="tablet",w="smarttv",_="wearable",b="embedded",x="Amazon",k="Apple",T="ASUS",S="BlackBerry",Z="Browser",O="Chrome",E="Firefox",C="Google",N="Huawei",j="LG",I="Microsoft",A="Motorola",P="Opera",R="Samsung",V="Sharp",$="Sony",M="Xiaomi",D="Zebra",U="Facebook",z=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},q=function(e,t){return typeof e===c&&-1!==L(t).indexOf(L(e))},L=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},K=function(e,t){for(var i,n,r,o,c,u,l=0;l<t.length&&!c;){var p=t[l],h=t[l+1];for(i=n=0;i<p.length&&!c;)if(c=p[i++].exec(e))for(r=0;r<h.length;r++)u=c[++n],typeof(o=h[r])===d&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):a:this[o[0]]=u?o[1].call(this,u,o[2]):a:4===o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):a):this[o]=u||a;l+=2}},W=function(e,t){for(var i in t)if(typeof t[i]===d&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(q(t[i][n],e))return"?"===i?a:i}else if(q(t[i],e))return"?"===i?a:i;return e},F={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},H={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,m],[/opios[\/ ]+([\w\.]+)/i],[m,[l,P+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[l,P]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[l,"UC"+Z]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[m,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+Z],m],[/\bfocus\/([\w\.]+)/i],[m,[l,E+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[l,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[l,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[l,"MIUI "+Z]],[/fxios\/([-\w\.]+)/i],[m,[l,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+Z]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+Z],m],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,U],m],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[l,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,O+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[l,"Android "+Z]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[m,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[l,E+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,m],[/(cobalt)\/([\w\.]+)/i],[l,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,L]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",L]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,L]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,R],[p,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,R],[p,y]],[/((ipod|iphone)\d+,\d+)/i],[u,[h,k],[p,y]],[/(ipad\d+,\d+)/i],[u,[h,k],[p,g]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[h,k],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,k],[p,g]],[/(macintosh);/i],[u,[h,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,N],[p,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,N],[p,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,M],[p,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,M],[p,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[p,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[p,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,A],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,A],[p,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,j],[p,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,j],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[p,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[p,y]],[/(pixel c)\b/i],[u,[h,C],[p,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,C],[p,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,$],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,$],[p,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,x],[p,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,x],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[p,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,S],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,T],[p,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,T],[p,y]],[/(nexus 9)/i],[u,[h,"HTC"],[p,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[p,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[p,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[p,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,V],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[p,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[p,g]],[/(surface duo)/i],[u,[h,I],[p,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[p,y]],[/(u304aa)/i],[u,[h,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[p,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[p,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[p,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[p,g]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[p,g]],[/\b(k88) b/i],[u,[h,"ZTE"],[p,g]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[p,g]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[p,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[p,g]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[p,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[p,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[p,y]],[/\b(ph-1) /i],[u,[h,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[p,g]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[p,g]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[p,g]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[p,g]],[/(sprint) (\w+)/i],[h,u,[p,y]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,I],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,D],[p,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,D],[p,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[p,v]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[u,[h,$],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,I],[p,v]],[/smart-tv.+(samsung)/i],[h,[p,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,R],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,j],[p,w]],[/(apple) ?tv/i],[h,[u,k+" TV"],[p,w]],[/crkey/i],[[u,O+"cast"],[h,C],[p,w]],[/droid.+aft(\w)( bui|\))/i],[u,[h,x],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,V],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,$],[p,w]],[/(mitv-\w{5}) bui/i],[u,[h,M],[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[h,B],[u,B],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/((pebble))app/i],[h,u,[p,_]],[/droid.+; (glass) \d/i],[u,[h,C],[p,_]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,D],[p,_]],[/(quest( 2)?)/i],[u,[h,U],[p,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[m,W,F]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[m,W,F]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,"Mac OS"],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,m],[/\(bb(10);/i],[m,[l,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[l,E+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[l,"webOS"]],[/crkey\/([\d\.]+)/i],[m,[l,O+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[l,"Chromium OS"],m],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,m],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,m]]},G=function(e,t){if(typeof e===d&&(t=e,e=a),!(this instanceof G))return new G(e,t).getResult();var i=e||(typeof r!==o&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(H,t):H;return this.getBrowser=function(){var e,t={};return t[l]=a,t[m]=a,K.call(t,i,n.browser),t.major=typeof(e=t.version)===c?e.replace(/[^\d\.]/g,"").split(".")[0]:a,t},this.getCPU=function(){var e={};return e[f]=a,K.call(e,i,n.cpu),e},this.getDevice=function(){var e={};return e[h]=a,e[u]=a,e[p]=a,K.call(e,i,n.device),e},this.getEngine=function(){var e={};return e[l]=a,e[m]=a,K.call(e,i,n.engine),e},this.getOS=function(){var e={};return e[l]=a,e[m]=a,K.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===c&&e.length>350?B(e,350):e,this},this.setUA(i),this};G.VERSION="0.7.33",G.BROWSER=z([l,m,"major"]),G.CPU=z([f]),G.DEVICE=z([u,h,p,v,y,w,g,_,b]),G.ENGINE=G.OS=z([l,m]),typeof t!==o?(e.exports&&(t=e.exports=G),t.UAParser=G):i.amdO?(n=function(){return G}.call(t,i,t,e))===a||(e.exports=n):typeof r!==o&&(r.UAParser=G);var J=typeof r!==o&&(r.jQuery||r.Zepto);if(J&&!J.ua){var Y=new G;J.ua=Y.getResult(),J.ua.get=function(){return Y.getUA()},J.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var i in t)J.ua[i]=t[i]}}}("object"==typeof window?window:this)}},ei={};function ti(e){var t=ei[e];if(void 0!==t)return t.exports;var i=ei[e]={exports:{}};return Qt[e].call(i.exports,i,i.exports,ti),i.exports}ti.amdO={},ti.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return ti.d(t,{a:t}),t},ti.d=(e,t)=>{for(var i in t)ti.o(t,i)&&!ti.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},ti.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ii={};ti.d(ii,{Ay:()=>oi,Tc:()=>ai,vV:()=>si});var ni=ti(724),ri=ti.n(ni);const ai={console:0,mobile:1,tablet:2,smarttv:3,wearable:4,other:5},si=function(e){try{const t=ri()(e);return{viewer:void 0===t?.browser?.name?"":t.browser.name,type:void 0===t?.device?.type?"":t.device.type,os:void 0===t?.os?.name?"":t.os.name}}catch(e){return{viewer:"",type:"",os:""}}},oi=si;var di=ii.Ay;const ci=Et.object({viewer:Et.string().min(1),os:Et.string().min(1),type:Et.enum(["console","mobile","tablet","smarttv","wearable","other","desktop",""])});async function ui(e){return dn.validate(),di(e)}const li={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var pi,hi=new Uint8Array(16);function mi(){if(!pi&&!(pi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(hi)}for(var fi=[],vi=0;vi<256;++vi)fi.push((vi+256).toString(16).slice(1));const yi=function(e,t,i){if(li.randomUUID&&!t&&!e)return li.randomUUID();var n=(e=e||{}).random||(e.rng||mi)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=n[r];return t}return function(e,t=0){return(fi[e[t+0]]+fi[e[t+1]]+fi[e[t+2]]+fi[e[t+3]]+"-"+fi[e[t+4]]+fi[e[t+5]]+"-"+fi[e[t+6]]+fi[e[t+7]]+"-"+fi[e[t+8]]+fi[e[t+9]]+"-"+fi[e[t+10]]+fi[e[t+11]]+fi[e[t+12]]+fi[e[t+13]]+fi[e[t+14]]+fi[e[t+15]]).toLowerCase()}(n)},gi=function(e){return new Promise((async t=>{let i;try{i=await e()}catch{}if(i)t(i);else{const i=5;let n=2;const r=setInterval((async()=>{let i;try{i=await e()}catch{}i&&(clearInterval(r),t(i)),n--<=0&&(clearInterval(r),t(void 0))}),100);setTimeout((()=>{clearInterval(r)}),i*n+1e3)}}))},wi="https://paywall.sophi.io";class _i extends Error{constructor(e,t){super(e,{cause:t})}}const bi=Et.number().min(1),xi=Et.string(),ki=Et.boolean(),Ti=Et.string().transform((e=>e.trim())).pipe(Et.string().min(1));function Si(e,t){return"number"==typeof e?e:t}function Zi(e,t){return{...t,...e}}async function Oi(e){return"function"==typeof e?await e():e}async function Ei(e,t){try{return t.parse(e)}catch{throw new _i(`UnrecognizedArgumentError: Expected string or function that returns a string. Got ${typeof e}.`,{cause:e})}}function Ci(e){return Object.values(e).some((e=>void 0!==e))}const Ni={visit:Ft.partial().refine(Ci),device:ci.partial().refine(Ci),timeout:bi,prefetch:ki};async function ji(e,t,i,n){const r=t.safeParse(e);return r.success?r.data:null!==e?n(e,await Oi(i)):Oi(i)}async function Ii(){try{const e=await(window?.sophiSegments?.getVariant?.());if(e){const t={1:"1",2:"2",3:"3"}[e];if(t)return t}}catch(e){}return r.warn("No AB test variant found"),null}function Ai(e){const{trace:t,outcome:{wallVisibility:i,wallType:n}}=e;return{...void 0===n?{}:{wallType:n},wallVisibility:i,traceCode:t}}function Pi(e){const{traceCode:t,...i}=Ai(e);return{...i,trace:t}}async function Ri(e,t,i){const n=dn.hostname,r=new URL(`${wi}/hosts/${n}/decisions/me`),{_visitor:a,_device:s}=e,o=Mi(e);an.data({visitorType:a.type,device:s.type,os:s.os,viewer:s.viewer}),r.search=o.toString();const d={signal:t,priority:"high"},c=await fetch(r,d);if(clearTimeout(i),c.status<400){const e=await c.json();return an.data({wallVisibility:e?.outcome?.wallVisibility}),[e,o]}throw an.data({cause:c}),c}const Vi=e=>{let[t,i]=e;return window.sophi.paywall.decision.request=Array.from(i.entries()).reduce(((e,t)=>{let[i,n]=t;return{...e,[i]:n}}),{}),window.sophi.paywall.decision.response=t,t},$i=(e,t)=>("registered"===e._visitor.type&&"regwall"===t.outcome.wallType&&(t.outcome.wallVisibility="never",delete t.outcome.wallType),t),Mi=e=>{const t=new URLSearchParams({"content.id":e._contentId,"page.section":e._section,"visitor.type":e._visitor.type,"visitor.isReturning":e._visitor.isReturning.toString(),"visitor.visit.timezone":e._visit.timeZone,"visitor.visit.referrer":e._visit.referrer,"visitor.device.viewer":e._device.viewer,"visitor.device.os":e._device.os,"visitor.device.type":e._device.type,"visitor.pageViewByArticleCount":e._pageViewByArticleCount.toString()});return e.experiment&&(t.append("experiment.id",e.experiment.experimentId),e.experiment.assignedGroup&&t.append("experiment.assignedGroup",e.experiment.assignedGroup)),t},Di=(e,t)=>{let i="t";return e instanceof Error&&"AbortError"===e.name?(i+="002",t&&(i+=t._timeout/10)):e instanceof Error&&"TypeError"===e.name?i+="003001":i+="status"in e?"003"+e.status:"004000",i=i.substring(0,7).padEnd(7,"0"),{id:yi(),createdAt:(new Date).toISOString(),trigger:{runtimeModelVersion:"default",parameters:{}},outcome:{wallVisibility:"never"},trace:i}};let Ui=null,zi=null,qi=null,Li=null;async function Bi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[n,a,s,o,c,u,l]=t,h={contentId:await Oi(n),visitor:await Oi(a),section:await Oi(s),optional1:await Oi(o),optional2:await Oi(c),optional3:await Oi(u),optional4:await Oi(l)},m=await Ei(h.contentId,Ti),f=await Ei(h.visitor,jt);let v=await async function(e,t,i,n){if(void 0===e)return e;const a=i.safeParse(e);if(!1===a.success)throw r.error(`Unrecognized format of argument: ${n}. Received:`,e),new _i(`UnrecognizedArgumentError: Unrecognized format of argument: ${n}`,{cause:a.error});return a.data}(h.section,0,xi,"section");const y=void 0===v?dn.getSection?await dn.getSection():"":v,g=function(e){const t={visit:null,device:null,timeout:null,prefetch:null};for(const i of e){if(null==i)continue;let e=!1;for(const[n,a]of d(Ni)){const s=a.safeParse(i);if(s.success){e=!0,null!==t[n]&&r.warn(`Duplicate argument of type ${n}`),t[n]=s.data;break}}if(!1===e)throw r.error("Unrecognized argument",i),new _i("UnrecognizedArgumentError: Cannot parse argument",{cause:i})}return t}([h.optional1,h.optional2,h.optional3,h.optional4]),w=await ji(g.visit,Ft,Xt,Zi),_=await ji(g.device,ci,ui,Zi),b=await ji(g.timeout,bi,(()=>2e3),Si),x={type:f,isReturning:Mt.isReturning};let k=null;const T=function(){const e=window.document.location.hostname,t=new Map;t.set(["www.mlive.com","www.cleveland.com","www.oregonlive.com","www.nj.com","www.syracuse.com","www.pennlive.com","www.masslive.com","www.silive.com","www.lehighvalleylive.com","www.al.com"],"pw:article:test1_ab");for(const[i,n]of t)if(i.some((t=>e===t)))return n;return null}();if(T){k={experimentId:T};const e=await gi(Ii);null!==e&&(k.assignedGroup=e)}const S=await ji(g.prefetch,ki,(()=>!1),(()=>!1));!1===Mt.pageViewIncremented&&Bt({type:qt});const Z=function(e){let t=0;for(const i of e)if(t+=i,t>=9)return 9;return t<1?1:t}(Mt.pageViewHistory);return S||Bt({type:Lt,visitorType:x.type}),await function(e){if(null!==Ui&&Ui._contentId===e._contentId&&null!==Li&&null!==zi&&null!==qi)return e.prefetch||(qi&&clearTimeout(qi),qi=setTimeout((()=>{zi&&zi.abort(),an.data({cause:`Timed out after ${e._timeout} ms.`})}),e._timeout),Ui._timeout=e._timeout),Li;if(null===Ui)return Ui=e,zi=new(p()),qi=setTimeout((()=>{zi&&zi.abort(),an.data({cause:`Timed out after ${e._timeout} ms.`})}),e._timeout),Li=Ri(e,zi.signal,qi).then(Vi).then((t=>$i(e,t))).catch((t=>{const i=Di(t,e);return Ui=null,Li=null,zi=null,qi&&(clearTimeout(qi),qi=null),Vi([i,Mi(e)]),i})),Li;{const t=new(p()),i=setTimeout((()=>{t.abort(),an.data({cause:`Timed out after ${e._timeout} ms.`})}),e._timeout);return Ri(e,t.signal,i).then(Vi).then((t=>$i(e,t))).catch((t=>{const i=Di(t,e);return Vi([i,Mi(e)]),i}))}}({_contentId:m,_section:y,_visitor:x,_visit:w,_device:_,_timeout:b,_pageViewByArticleCount:Z,experiment:k,prefetch:S})}function Ki(e){if(an.data({cause:e}),an.event("decision_response"),an.send(),e instanceof _i)throw new sn(e.message,{cause:e.cause});throw new sn("DecisionError: Cannot get paywall decision.",{cause:e})}function Wi(e){return window._matherq=window._matherq||[],window._matherq.push(["setDecision",e]),window._matherq.push(["setDecisionSource","sophi",!1]),e}function Fi(e){return an.event("decision_response"),an.send(),e}const Hi=async function(){an.event("decision_request"),dn.validate();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Bi(...o(t[0])?Gi(t[0]):t).then(o(t[0])?Pi:Ai).then(Wi).then(Fi).catch(Ki)},Gi=function(e){if(o(e)){const{contentId:t,visitor:i,section:n,visit:r,device:a,timeout:s}=e;return[t,i,n,r,a,s]}return e},Ji=window?.location?.hostname,Yi=JSON.parse('{ "localhost": 0, "denverpost.com": 0.01 }'),Xi=(()=>{for(const e of Object.keys(Yi))if(Ji.includes(e))return Yi[e];return 0})(),Qi=Xi>0&&Math.random()<=Xi,en=(()=>{const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return e})(),tn=e=>{try{return"string"==typeof e?e:e instanceof Error?JSON.stringify(e,Object.getOwnPropertyNames(e)):JSON.stringify(e)}catch(e){return"Error while stringifying"}};class nn{init=null;prefetch=null;request_start=null;request_complete=null;decision_request=null;decision_response=null;constructor(){this.load=performance.now()}}class rn extends nn{service="js-paywall-sdk";host="";os="";device="";viewer="";visitorType="";wallVisibility="";cause=null;uuid=(()=>en)();constructor(){super()}update(e,t){this[e]=t}}const an=new class{enabled=(()=>Qi)();entry=(()=>new rn)();observer=null;constructor(){try{this.observer=new PerformanceObserver((e=>{const t=e.getEntries();for(const e of t)e.name.startsWith(wi)&&(this.event("request_start",e.startTime),this.event("request_complete",e.startTime+e.duration))})),this.observer.observe({entryTypes:["resource"]})}catch{}}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.enabled)for(const[t,i]of d(e))i instanceof Error?this.entry.update(t,tn(i)):this.entry.update(t,i)}event(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:performance.now();this.enabled&&(this.entry[e]=t)}send(){if(this.enabled)try{const e=[{service:"js-paywall-sdk",ddsource:"browser",ddtags:`env:production,version:${s},source:browser,service:js-paywall-sdk`,message:tn(this.entry)}],t=new URL("https://browser-intake-datadoghq.com/api/v2/logs");t.searchParams.set("dd-api-key","pub778e1ae895d1f2a870c407f8127ae564");const i={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},credentials:"omit",body:tn(e)};fetch(t,i)}catch{}}};class sn extends Error{constructor(e,t){super(e,t),r.error(e,t?.cause)}}function on(e,t){if(void 0!==e&&"function"!=typeof e)throw new sn(`ConfigError: The value of ${t} should be a function. Received ${typeof e}.`,{cause:e});return e}const dn=function(){let e,t,i,n="";return{get getSection(){return e},set getSection(t){e=on(t,"getSection")},get getContentId(){return t},set getContentId(e){t=on(e,"getContentId")},get getVisitor(){return i},set getVisitor(e){i=on(e,"getVisitor")},get hostname(){return n},set hostname(e){window.location.hostname!==e&&r.warn(`The value "${e}" provided as hostname does not match window.location.hostname. Ensure you are using the correct hostname value.`),n=e},validate(){if(!n)throw new sn('ConfigError: No hostname found. Please initialize by running `sophi.paywall.init("www.example.com")`.',{cause:n})}}}();const cn={version:s,init:function(e){var t;return"string"==typeof e?(t=e,dn.hostname=t):function(e){let{hostname:t,getSection:i,getContentId:n,getVisitor:a}=e;dn.hostname=t,dn.getSection=i,dn.getContentId=n,dn.getVisitor=a,async function(e){let{getContentId:t,getSection:i,getVisitor:n}=e,a="",s="";i&&gi(i).then((e=>{a=e})),n&&gi(n).then((e=>{s=e}));const o=t?await gi(t):null;if(o){if(s){const e=jt.safeParse(s);e.success?s=e.data:(r.warn("Invalid visitor type, using 'anonymous' instead"),s="anonymous")}else s=Mt.visitorType;a||"string"==typeof a||(a=""),an.event("prefetch"),Bi(o,s,a,3e4,!0).then(Pi).then(Wi).catch((()=>{}))}}({getSection:i,getContentId:n,getVisitor:a})}(e),an.event("init"),an.data({host:dn.hostname}),un},getDecision:async function(e){const{traceCode:t,...i}=await Hi(...Gi(e));return{...i,trace:t}},getPaywallDecision:Hi,getVisitInformation:Xt,parseDeviceInformation:ui,decision:{request:null,response:null}};window.sophi&&(window.sophi.paywall&&r.warn("Duplicate load; may reset configuration."),window.sophi.paywall=cn),void 0===window.sophi&&(window.sophi={paywall:cn}),an.event("load");const un=cn})();